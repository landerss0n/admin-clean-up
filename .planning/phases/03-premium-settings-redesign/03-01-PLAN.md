---
phase: 03-premium-settings-redesign
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [assets/css/admin.css, includes/class-admin-page.php, includes/class-components.php]
autonomous: true

must_haves:
  truths:
    - "Settings page renders as a dark UI island inside WordPress admin (#121212 base)"
    - "Sidebar navigation uses dark theme with active tab highlight and hover states"
    - "Cards display with dark elevated surfaces (#1E1E1E) and subtle borders"
    - "Toggle switches use accent color (#5B9BFF) when checked with smooth transitions"
    - "Typography uses heavier weights for dark background readability"
    - "Mobile (782px) transforms sidebar to horizontal scrolling tabs"
    - "All interactive elements have visible focus indicators (2px, 3:1 contrast)"
    - "Save button has premium dark styling with hover state"
  artifacts:
    - path: "assets/css/admin.css"
      provides: "Complete dark premium theme CSS replacing light-mode styles"
      contains: "--acu-dark-bg-base: #121212"
    - path: "includes/class-admin-page.php"
      provides: "Updated render_settings_page with BEM dark-theme class names"
      contains: "acu-settings"
    - path: "includes/class-components.php"
      provides: "render_radio_group and render_text_input component methods"
      contains: "render_radio_group"
  key_links:
    - from: "includes/class-admin-page.php"
      to: "assets/css/admin.css"
      via: "BEM class names in HTML matching CSS selectors"
      pattern: "acu-settings"
    - from: "includes/class-components.php"
      to: "assets/css/admin.css"
      via: "Component HTML using acu-* BEM classes"
      pattern: "acu-radio|acu-text-input"
---

<objective>
Transform the settings page from light WordPress-native styling to a premium dark UI theme inspired by Stripe Dashboard and Linear. Replace all light-mode CSS with dark palette (#121212 base, #1E1E1E elevated surfaces), update the page wrapper and sidebar HTML to use BEM dark-theme classes, add component methods needed by complex tabs (radio groups, text inputs), and implement responsive behavior with accessibility compliance.

Purpose: The dark theme CSS must be complete before any tab migration, because tabs will render inside this dark container. This plan establishes the visual foundation that all 9 tabs will inherit.
Output: Complete dark-themed settings page shell (sidebar + content area + save button), new component methods for radio groups and text inputs, ready for tab content migration.
</objective>

<execution_context>
@/Users/lucas/.claude/get-shit-done/workflows/execute-plan.md
@/Users/lucas/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-premium-settings-redesign/03-CONTEXT.md
@.planning/phases/03-premium-settings-redesign/03-RESEARCH.md
@.planning/phases/02-ui-architecture/02-01-SUMMARY.md
@.planning/phases/02-ui-architecture/02-02-SUMMARY.md

@assets/css/admin.css
@includes/class-admin-page.php
@includes/class-components.php
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace CSS with premium dark theme</name>
  <files>assets/css/admin.css</files>
  <action>
Replace the ENTIRE contents of admin.css with the premium dark theme. The file should contain:

1. **Dark theme custom properties in :root** — Replace ALL existing custom properties with dark palette:
   - `--acu-dark-bg-base: #121212` (page background)
   - `--acu-dark-bg-elevated-1: #1E1E1E` (cards, sidebar)
   - `--acu-dark-bg-elevated-2: #272727` (hover states, inputs)
   - `--acu-dark-bg-elevated-3: #2C2C2C` (active states)
   - `--acu-dark-text-primary: rgba(255, 255, 255, 0.87)`
   - `--acu-dark-text-secondary: rgba(255, 255, 255, 0.60)`
   - `--acu-dark-text-disabled: rgba(255, 255, 255, 0.38)`
   - `--acu-dark-accent: #5B9BFF` (toggle, active tab, buttons)
   - `--acu-dark-accent-hover: #4A8AEE`
   - `--acu-dark-border: rgba(255, 255, 255, 0.1)`
   - `--acu-dark-border-hover: rgba(255, 255, 255, 0.2)`
   - `--acu-dark-shadow: 0 8px 32px rgba(0, 0, 0, 0.36)`
   - `--acu-dark-shadow-hover: 0 12px 48px rgba(0, 0, 0, 0.48)`
   - `--acu-dark-focus-color: #5B9BFF`
   - Keep spacing scale (xs through xl) and component tokens (toggle dimensions)
   - Transitions: `--acu-transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1)`, `--acu-transition-normal: 200ms cubic-bezier(0.4, 0, 0.2, 1)`, `--acu-transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1)`
   - Card: `--acu-card-border-radius: 12px`, `--acu-card-padding: 24px`

2. **Settings page wrapper (.acu-settings-wrap)** — The outermost wrapper:
   - Remove WordPress default page title styling, make it hidden (the dark UI is self-contained)

3. **Settings container (.acu-settings)** — The dark island:
   - `background: var(--acu-dark-bg-base)`
   - `border-radius: 12px`
   - `display: flex`
   - `max-width: 1100px`
   - Subtle border and shadow for depth
   - `overflow: hidden` for border-radius clipping

4. **Sidebar (.acu-sidebar)** — Dark vertical navigation:
   - `width: 220px`, `min-width: 220px`, `flex-shrink: 0`
   - `background: var(--acu-dark-bg-elevated-1)`
   - `border-right: 1px solid var(--acu-dark-border)`
   - `position: sticky`, `top: 32px` (WordPress admin bar height), `align-self: flex-start`
   - `padding: 16px 0`

5. **Sidebar links (.acu-sidebar__link)** — Tab navigation items:
   - `display: block`, `padding: 12px 20px`
   - `color: var(--acu-dark-text-secondary)`
   - `font-size: 13px`, `font-weight: 450` (heavier for dark)
   - `text-decoration: none`
   - `border-left: 3px solid transparent`
   - `transition: all var(--acu-transition-fast)`
   - Hover: `background: rgba(255,255,255,0.05)`, `color: var(--acu-dark-text-primary)`
   - Active (.acu-sidebar__link--active): `background: rgba(91,155,255,0.1)`, `border-left-color: var(--acu-dark-accent)`, `color: var(--acu-dark-accent)`, `font-weight: 550`
   - Focus-visible: 2px outline with accent color

6. **Content area (.acu-content)** — Where tabs render:
   - `flex: 1`, `min-width: 0`
   - `padding: 32px`

7. **Card component update (.acu-card)** — Dark elevated cards:
   - `background: var(--acu-dark-bg-elevated-1)`
   - `border: 1px solid var(--acu-dark-border)`
   - `border-radius: var(--acu-card-border-radius)` (12px)
   - `box-shadow: var(--acu-dark-shadow)`
   - `margin-bottom: 24px`
   - `transition: transform var(--acu-transition-normal), box-shadow var(--acu-transition-normal)`
   - Header: border-bottom using dark-border, title in text-primary with font-weight 650, description in text-secondary
   - Body: padding 16px 24px

8. **Toggle component update** — Dark theme toggle:
   - Track unchecked: `background: #3A3A3A`
   - Track checked: `background: var(--acu-dark-accent)`
   - Thumb: `background: #fff`
   - Focus: 2px solid accent outline with 2px offset

9. **Setting row (.acu-setting)** — Dark theme:
   - Border color using `var(--acu-dark-border)`
   - Label: `color: var(--acu-dark-text-primary)`, `font-weight: 550`
   - Description: `color: var(--acu-dark-text-secondary)`, `line-height: 1.8`

10. **Setting group (.acu-setting-group)** — Dark theme:
    - Title: `color: var(--acu-dark-text-secondary)`

11. **Radio group (.acu-radio-group)** — New component for Updates/Media tabs:
    - `.acu-radio-group` container with padding
    - `.acu-radio` items with flex layout, gap, padding
    - Custom radio appearance: circle with dark-accent when checked
    - `.acu-radio__input` visually hidden same as toggle
    - `.acu-radio__indicator` custom circle (18px, border 2px solid text-secondary, checked fills with accent)
    - `.acu-radio__label` color text-primary
    - `.acu-radio__description` color text-secondary, smaller

12. **Text input (.acu-text-input)** — For Footer tab custom text fields:
    - `background: var(--acu-dark-bg-elevated-2)`
    - `border: 1px solid var(--acu-dark-border)`
    - `border-radius: 6px`
    - `color: var(--acu-dark-text-primary)`
    - `padding: 10px 14px`
    - `font-size: 13px`
    - `width: 100%`, `max-width: 400px`
    - Focus: `border-color: var(--acu-dark-accent)`, subtle glow shadow
    - Placeholder: `color: var(--acu-dark-text-disabled)`

13. **Select component (.acu-select)** — For Menus tab role dropdowns:
    - Dark background, light text, custom arrow
    - Focus and hover states matching text input

14. **Save button (.acu-button-primary)** — Premium CTA:
    - `background: var(--acu-dark-accent)`, `color: #000`
    - `border: none`, `border-radius: 8px`
    - `padding: 12px 24px`, `min-height: 44px`
    - `font-weight: 550`, `font-size: 14px`
    - Hover: `background: var(--acu-dark-accent-hover)`, `transform: translateY(-1px)`
    - Focus-visible: outline + box-shadow glow
    - Submit container: `border-top: 1px solid var(--acu-dark-border)`, `padding-top: 24px`, `margin-top: 24px`, flex justify-end

15. **Warning/notice text** — For inline warnings:
    - `.acu-text-warning` with soft red/orange suitable for dark bg (use #F48FB1 or #FFB74D)

16. **Responsive (max-width: 782px):**
    - Container: `flex-direction: column`, `border-radius: 8px`
    - Sidebar: `width: 100%`, no border-right, `border-bottom` instead
    - Sidebar nav: `display: flex`, `flex-wrap: nowrap`, `overflow-x: auto`, `gap: 8px`, `padding: 12px 16px`
    - Sidebar links: `flex: 0 0 auto`, `white-space: nowrap`, `border-radius: 8px`, `border-left: none`, `min-height: 44px`, `padding: 10px 16px`
    - Active link on mobile: `background: var(--acu-dark-accent)`, `color: #000`
    - Content: `padding: 16px`
    - Cards: reduced margin
    - Save button: `width: 100%`, container sticky at bottom with shadow

17. **Accessibility:**
    - All focusable elements get `:focus-visible` with 2px accent outline
    - Toggle, radio, links, buttons, inputs all have focus styles
    - Reduced motion: `@media (prefers-reduced-motion: reduce)` disables transitions

Remove ALL old light-theme CSS (the wp-clean-up-* classes, form-table styles, etc.). The old classes are being replaced by new BEM dark-theme classes in Task 2.
  </action>
  <verify>
    - File contains `--acu-dark-bg-base: #121212`
    - File contains `.acu-settings` with dark background
    - File contains `.acu-sidebar__link--active` with accent color
    - File contains `.acu-card` with `var(--acu-dark-bg-elevated-1)`
    - File contains `.acu-radio-group` styles
    - File contains `.acu-text-input` styles
    - File contains `.acu-select` styles
    - File contains `.acu-button-primary` styles
    - File contains `@media (max-width: 782px)` responsive block
    - File contains `@media (prefers-reduced-motion: reduce)` block
    - No references to old `wp-clean-up-` class names remain
    - No references to old `--acu-color-` properties remain (they are now `--acu-dark-*`)
  </verify>
  <done>Complete dark premium CSS theme with all component styles, responsive layout, and accessibility. No remnants of old light-theme CSS.</done>
</task>

<task type="auto">
  <name>Task 2: Update page wrapper HTML and add new component methods</name>
  <files>includes/class-admin-page.php, includes/class-components.php</files>
  <action>
**In class-admin-page.php — Update `render_settings_page()` method:**

Replace the HTML wrapper structure to use new dark-theme BEM class names. The form and tab switching logic stays the same; only the CSS classes and HTML structure change.

Replace this pattern:
```php
<div class="wrap wp-clean-up-settings-wrap">
    <h1>...</h1>
    <div class="wp-clean-up-settings">
        <nav class="wp-clean-up-sidebar">
            <ul class="wp-clean-up-nav">
                <li><a href="..." class="active">...</a></li>
            </ul>
        </nav>
        <div class="wp-clean-up-content">
            <form...>
```

With this new structure:
```php
<div class="wrap acu-settings-wrap">
    <div class="acu-settings">
        <nav class="acu-sidebar">
            <ul class="acu-sidebar__nav">
                <li><a href="..." class="acu-sidebar__link acu-sidebar__link--active">...</a></li>
            </ul>
        </nav>
        <div class="acu-content">
            <form...>
```

Key changes:
- Remove the `<h1>` page title (the dark island is self-contained, no WordPress title needed above)
- Wrapper class: `acu-settings-wrap` (replaces `wp-clean-up-settings-wrap`)
- Container class: `acu-settings` (replaces `wp-clean-up-settings`)
- Sidebar class: `acu-sidebar` (replaces `wp-clean-up-sidebar`)
- Nav class: `acu-sidebar__nav` (replaces `wp-clean-up-nav`)
- Link class: `acu-sidebar__link` (replaces no class) with modifier `acu-sidebar__link--active` (replaces `active`)
- Content class: `acu-content` (replaces `wp-clean-up-content`)
- Remove the disabled/badge logic for tabs (not needed in Phase 3 - all tabs are active)
- Keep the form method/action, settings_fields, hidden current_tab input, and tab switch logic unchanged
- Replace `submit_button()` call with a custom styled button:
  ```php
  <div class="acu-submit">
      <button type="submit" class="acu-button-primary"><?php esc_html_e( 'Save Settings', 'admin-clean-up' ); ?></button>
  </div>
  ```

For the "Plugins" tab title in get_tabs(), rename from "Plugins" to "Plugin Cleanup" to match the phase context (extensible plugin cleanup concept).

**In class-components.php — Add two new static methods:**

1. **`render_radio_group( $args )`** — For Updates core_updates and Media clean_filenames_types:
   ```php
   $defaults = [
       'name'    => '',
       'value'   => '',
       'options' => [],  // Array of ['value' => '', 'label' => '', 'description' => '']
   ];
   ```
   Output structure:
   ```html
   <div class="acu-radio-group">
       <!-- For each option: -->
       <div class="acu-radio">
           <input type="radio" id="{auto-id}" name="{name}" value="{option_value}" class="acu-radio__input" checked>
           <label for="{auto-id}" class="acu-radio__indicator"></label>
           <div class="acu-radio__content">
               <label for="{auto-id}" class="acu-radio__label">{label}</label>
               <p class="acu-radio__description">{description}</p>  <!-- only if description set -->
           </div>
       </div>
   </div>
   ```
   Auto-generate IDs from name + value using `sanitize_title()`.
   Use `checked()` WordPress function for selected state.
   Escape all output with esc_attr/esc_html.

2. **`render_text_input( $args )`** — For Footer custom text fields:
   ```php
   $defaults = [
       'name'        => '',
       'value'       => '',
       'placeholder' => '',
       'label'       => '',
       'description' => '',
       'id'          => '',
   ];
   ```
   Output structure:
   ```html
   <div class="acu-setting acu-setting--text">
       <div class="acu-setting__content">
           <label for="{id}" class="acu-setting__label">{label}</label>
           <input type="text" id="{id}" name="{name}" value="{value}" placeholder="{placeholder}" class="acu-text-input">
           <p class="acu-setting__description">{description}</p>  <!-- only if set -->
       </div>
   </div>
   ```
   Auto-generate ID from name if empty. Escape all output.

3. **`render_select( $args )`** — For Menus tab role dropdowns:
   ```php
   $defaults = [
       'name'    => '',
       'value'   => '',
       'options' => [],  // Array of ['value' => '', 'label' => '']
       'id'      => '',
       'disabled' => false,
   ];
   ```
   Output structure:
   ```html
   <select id="{id}" name="{name}" class="acu-select" disabled>
       <option value="{value}" selected>{label}</option>
   </select>
   ```
   Use `selected()` and `disabled()` WordPress functions.
  </action>
  <verify>
    - `php -l includes/class-admin-page.php` returns no syntax errors
    - `php -l includes/class-components.php` returns no syntax errors
    - grep for "acu-settings" in class-admin-page.php returns matches
    - grep for "wp-clean-up-settings" in class-admin-page.php returns NO matches
    - grep for "render_radio_group" in class-components.php returns matches
    - grep for "render_text_input" in class-components.php returns matches
    - grep for "render_select" in class-components.php returns matches
    - grep for "acu-button-primary" in class-admin-page.php returns matches
    - grep for "Plugin Cleanup" in class-admin-page.php returns matches
  </verify>
  <done>Settings page renders with new dark-theme BEM wrapper classes. Three new component methods (render_radio_group, render_text_input, render_select) available for tab migration. No old wp-clean-up-* class names remain in the admin page renderer.</done>
</task>

</tasks>

<verification>
After both tasks:
1. `php -l assets/css/admin.css` — No syntax errors (CSS is valid)
2. `php -l includes/class-admin-page.php` — No parse errors
3. `php -l includes/class-components.php` — No parse errors
4. `grep -c "wp-clean-up-" includes/class-admin-page.php` — Returns 0
5. `grep -c "acu-settings" includes/class-admin-page.php` — Returns > 0
6. `grep -c "acu-dark-bg-base" assets/css/admin.css` — Returns > 0
7. `grep -c "render_radio_group\|render_text_input\|render_select" includes/class-components.php` — Returns 3
</verification>

<success_criteria>
- Complete dark premium CSS replaces all light-mode styles
- Page wrapper uses new BEM dark-theme classes
- Three new component methods exist and pass syntax check
- The settings page shell is ready to receive migrated tab content
- Responsive layout works at 782px breakpoint (CSS only, no testing needed)
- Focus indicators defined for all interactive elements
</success_criteria>

<output>
After completion, create `.planning/phases/03-premium-settings-redesign/03-01-SUMMARY.md`
</output>
